#version=DEVEL
# Install OS instead of upgrade
install
# Firewall configuration
firewall --disabled
# Use network installation
url --url="http://download.englab.brq.redhat.com/pub/fedora/linux/development/rawhide/x86_64/os/"
repo --name="fedora" 
repo --name="updates" 
repo --name="updates-testing" 
repo --name="fedora-abrt" --baseurl=http://repos.fedorapeople.org/repos/abrt/abrt/fedora-17/x86_64/
# Network information
network  --bootproto=dhcp --device=eth0
# Root password
rootpw --iscrypted $1$1q6/3BvX$pfhRPRVl0GE3aRLxt3lE0/
# System authorization information
auth --useshadow  --passalgo=sha512
# Use text mode install
text
# System keyboard
keyboard us
# System language
lang en_US
# SELinux configuration
selinux --enforcing
# Do not configure the X Window System
skipx
# Installation logging level
logging --level=info
# Reboot after installation
reboot
# System timezone
timezone --isUtc Europe/Prague
# System bootloader configuration
bootloader --append="rhgb quiet" --location=mbr --driveorder="vda"
# Clear the Master Boot Record
zerombr
# Partition clearing information
clearpart --all --initlabel 
# Disk partitioning information
part / --fstype="ext4" --grow --size=1
part biosboot --fstype="biosboot" --size=1

%packages --excludedocs --ignoremissing
@base
@development
@development-tools
abrt*
beakerlib
btparser*
createrepo
curl
dejagnu
expat-devel
expect
gcc
git
intltool
kernel-devel
libreport*
libtool
make
mock
nc
newt-devel
readline-devel
rpm-build
screen
strace
texinfo-tex
vim-enhanced
yum-utils
-acpid
-b43-fwcutter
-byacc
-cryptsetup-luks
-cscope
-ctags
-cvs
-diffstat
-dosfstools
-doxygen
-eject
-elfutils
-fprintd-pam
-gcc-gfortran
-hunspell
-hunspell-en
-indent
-irqbalance
-kexec-tools
-libreport-compat
-man-pages
-man-pages-overrides
-mlocate
-nano
-patchutils
-pinfo
-prelink
-rcs
-rdate
-readahead
-rfkill
-subversion
-swig
-system-config-firewall-tui
-system-config-network-tui
-systemtap
-systemtap-runtime
-tcpdump
-tcsh
-time
-usbutils
-vconfig
-virt-what
-which
-wireless-tools
-words

%end
%post --interpreter=/bin/bash
cat >> /etc/procmailrc <<_END_
VERBOSE=no
LOGFILE=/var/log/procmaillog
_END_
cat > /etc/hosts << "_END_"
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

10.34.24.17 fedorahosted.org
_END_
cat > /etc/motd << "_END_"
ABRT integration test runner

! beware of the fedorahosted alias in /etc/hosts
_END_
cat > /etc/yum.repos.d/fedora-abrt.repo << "_END_"
[fedora-abrt]
name=Nightly builds of ABRT related projects - abrt, libreport, btparser, faf
baseurl=http://abrt.brq.redhat.com/repo/fedora-$releasever/RPMS/$basearch/
enabled=1
skip_if_unavailable=1
gpgcheck=0

[fedora-abrt-source]
name=Nightly builds of ABRT related projects - abrt, libreport, btparser, faf - Source
baseurl=http://abrt.brq.redhat.com/repo/fedora-$releasever/SRPMS
enabled=0
skip_if_unavailable=1
gpgcheck=0
_END_
%end
